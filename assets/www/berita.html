<!DOCTYPE html>
<html lang="en" class="no-js">
    <!-- BEGIN HEAD -->
    <head>
        <meta charset="utf-8"/>
        <title>UNY Apps</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="materialize/css/materialize.min.css">
        <style type="text/css">
            .showing{
                display: block;
            }
            .hidden{
                display: none;
            }
            .side-nav-logo{
                height: 70px;
                max-height: 100px;
                overflow: hidden;
            }
        </style>
    </head>
    <!-- END HEAD -->
    <!-- BODY -->
    <body>
        <div>
        <ul id="slide-out" class="side-nav fixed">
            <a href="index.html">
                <div class="side-nav-logo">
                    <img src="img/logo.png" class="responsive-img">
                </div>
            </a>
            <li><a class="waves-effect black-text" href="berita.html">BERITA</a></li>
            <li><a class="waves-effect black-text" href="pengumuman.html">PENGUMUMAN</a></li>
            <li><a class="waves-effect black-text" href="tentang-kami.html">TENTANG KAMI</a></li>
        </ul>

        <nav>
            <div class="nav-wrapper blue">
                <a href="#" class="brand-logo"><img class="responsive-img" src="img/logo.png" style="max-height: 50px; margin-top: 3px;"></a>
                <a href="#" data-activates="slide-out" class="white-text button-collapse"><i class="material-icons">menu</i></a>
            </div>
        </nav>
        <div class="showing" style="margin-top: 45vh; text-align: center;" id="loader-uny-apps">
            <div class="preloader-wrapper big active">
              <div class="spinner-layer spinner-blue">
                <div class="circle-clipper left">
                  <div class="circle"></div>
                </div><div class="gap-patch">
                  <div class="circle"></div>
                </div><div class="circle-clipper right">
                  <div class="circle"></div>
                </div>
              </div>

              <div class="spinner-layer spinner-red">
                <div class="circle-clipper left">
                  <div class="circle"></div>
                </div><div class="gap-patch">
                  <div class="circle"></div>
                </div><div class="circle-clipper right">
                  <div class="circle"></div>
                </div>
              </div>

              <div class="spinner-layer spinner-yellow">
                <div class="circle-clipper left">
                  <div class="circle"></div>
                </div><div class="gap-patch">
                  <div class="circle"></div>
                </div><div class="circle-clipper right">
                  <div class="circle"></div>
                </div>
              </div>

              <div class="spinner-layer spinner-green">
                <div class="circle-clipper left">
                  <div class="circle"></div>
                </div><div class="gap-patch">
                  <div class="circle"></div>
                </div><div class="circle-clipper right">
                  <div class="circle"></div>
                </div>
              </div>
            </div>
        </div>
        <div id="berita-all" style="margin-top: 10px; ">
            <div class="row">
                <div class="row">
                    <div class="col s12">
                        <div class="col s12 blue darken-1 center-align">
                            <p>
                                <b class="white-text">BERITA</b>
                            <p>
                        </div>
                    </div>
                    <div id="berita-all-section">
                        
                    </div>
                    <a href="#" id="load-more-link">
                        <div class="col s12">
                            <div class="col s12 blue center-align">
                                <p>
                                    <b class="white-text">LOAD MORE<b>
                                <p>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        <!-- JS ASSETS -->
        <script type="text/javascript" src="materialize/js/jquery.min.js"></script>
        <script type="text/javascript" src="materialize/js/ygrab.js"></script>
        <script type="text/javascript" src="materialize/js/materialize.min.js"></script>
        <script type="text/javascript">
            var berita=0;
            $(document).ready(function() {
                $(".button-collapse").sideNav();
                beritaPage(berita);

                $('#load-more-link').click(function(event) {
                    event.preventDefault();
                    berita += 1;
                    beritaPage(berita);
                }); 
            });
            function beritaPage(page){
                $('#berita-all').removeClass('showing');
                $('#loader-uny-apps').removeClass('hidden');
                $('#berita-all').addClass('hidden');
                $('#loader-uny-apps').addClass('showing');
                var data = [
                    {
                        url: 'https://www.uny.ac.id/index-berita?page='+ page.toString(), // url string required
                        selector: 'td', // selector string rquired
                        loop: true, // each boolean rquired
                        result: [
                            {
                                name: 'image', // key string rquired
                                find: 'div.views-field.views-field-field-image img', // selector child string required
                                grab: {
                                    by: 'attr', // attribut string required
                                    value: 'src' // attribut value string optional
                                }
                            },
                            {
                                name: 'title',
                                find: 'div.views-field.views-field-title a',
                                grab: {
                                    by: 'text',
                                    value: ''
                                }
                            },
                            {
                                name: 'link',
                                find: 'div.views-field.views-field-title a',
                                grab: {
                                    by: 'attr',
                                    value: 'href'
                                }
                            },
                            {
                                name: 'content',
                                find: 'div.views-field.views-field-body p',
                                grab: {
                                    by: 'text',
                                    value: ''
                                }
                            },
                            // ---- new selector ---- //
                        ]
                    }
                    // ---- new website url ---- //
                ];

                ygrab(data, function(result) {
                    var berita = $('#berita-all-section');
                    berita.empty();
                    for (var i = 0; i < result.length; i++) {
                        berita.append('<div class="col s12 m4"><div class="card"><div class="card-image"><img src="' + result[i].image + '"></div><div class="card-content" style="text-align: justify;"><p><b>'+ result[i].title +'</b></p>'+ result[i].content.substring(0,(result[i].content.length-18)) +'...</div><div class="card-action"><a href="detail-berita.html?' + result[i].link + '">'+ result[i].title +'</a></div></div></div>');
                    }
                    // console.log(JSON.stringify(result, null, 2));
                });
                setTimeout(function(){
                    $('#loader-uny-apps').removeClass('showing');
                    $('#berita-all').removeClass('hidden');
                    $('#berita-all').addClass('showing');
                    $('#loader-uny-apps').addClass('hidden');
                }, 3000);
            }
        </script>
    </body>
    <!-- END BODY -->
</html>