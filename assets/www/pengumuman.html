<!DOCTYPE html>
<html lang="en" class="no-js">
    <!-- BEGIN HEAD -->
    <head>
        <meta charset="utf-8"/>
        <title>UNY Apps</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="materialize/css/materialize.min.css">
        <style type="text/css">
            .showing{
                display: block;
            }
            .hidden{
                display: none;
            }
            .side-nav-logo{
                height: 70px;
                max-height: 100px;
                overflow: hidden;
            }
        </style>
    </head>
    <!-- END HEAD -->
    <!-- BODY -->
    <body>
        <div>
        <ul id="slide-out" class="side-nav fixed">
            <a href="index.html">
                <div class="side-nav-logo">
                    <img src="img/logo.png" class="responsive-img">
                </div>
            </a>
            <li><a class="waves-effect black-text" href="berita.html">BERITA</a></li>
            <li><a class="waves-effect black-text" href="pengumuman.html">PENGUMUMAN</a></li>
            <li><a class="waves-effect black-text" href="tentang-kami.html">TENTANG KAMI</a></li>
        </ul>

        <nav>
            <div class="nav-wrapper blue">
                <a href="#" class="brand-logo"><img class="responsive-img" src="img/logo.png" style="max-height: 50px; margin-top: 3px;"></a>
                <a href="#" data-activates="slide-out" class="white-text button-collapse"><i class="material-icons">menu</i></a>
            </div>
        </nav>
        <div class="showing" style="margin-top: 45vh; text-align: center;" id="loader-uny-apps">
            <div class="preloader-wrapper big active">
              <div class="spinner-layer spinner-blue">
                <div class="circle-clipper left">
                  <div class="circle"></div>
                </div><div class="gap-patch">
                  <div class="circle"></div>
                </div><div class="circle-clipper right">
                  <div class="circle"></div>
                </div>
              </div>

              <div class="spinner-layer spinner-red">
                <div class="circle-clipper left">
                  <div class="circle"></div>
                </div><div class="gap-patch">
                  <div class="circle"></div>
                </div><div class="circle-clipper right">
                  <div class="circle"></div>
                </div>
              </div>

              <div class="spinner-layer spinner-yellow">
                <div class="circle-clipper left">
                  <div class="circle"></div>
                </div><div class="gap-patch">
                  <div class="circle"></div>
                </div><div class="circle-clipper right">
                  <div class="circle"></div>
                </div>
              </div>

              <div class="spinner-layer spinner-green">
                <div class="circle-clipper left">
                  <div class="circle"></div>
                </div><div class="gap-patch">
                  <div class="circle"></div>
                </div><div class="circle-clipper right">
                  <div class="circle"></div>
                </div>
              </div>
            </div>
        </div>
        <div id="pengumuman-all" style="margin-top: 10px; ">
            <div class="row">
                <div class="row">
                    <div class="col s12">
                        <div class="col s12 blue darken-1 center-align">
                            <p>
                                <b class="white-text">PENGUMUMAN</b>
                            </p>
                        </div>
                    </div>
                    <div class="col s12">
                        <ul class="collection" id="pengumuman-section">
                        </ul>
                    </div>
                    <a href="#" id="load-more-link">
                        <div class="col s12">
                            <div class="col s12 blue center-align">
                                <p><b class="white-text">SEMUA PENGUMUMAN <b><p>
                            </div>
                        </div>
                    </a>
                </p>
            </div>
        </div>
        <!-- JS ASSETS -->
        <script type="text/javascript" src="materialize/js/jquery.min.js"></script>
        <script type="text/javascript" src="materialize/js/ygrab.js"></script>
        <script type="text/javascript" src="materialize/js/materialize.min.js"></script>
        <script type="text/javascript">
            var pengumuman=0;
            $(document).ready(function() {
                $(".button-collapse").sideNav();
                pengumumanPage(pengumuman);

                $('#load-more-link').click(function(event) {
                    event.preventDefault();
                    pengumuman += 1;
                    pengumumanPage(pengumuman);
                }); 
            });
            function pengumumanPage(page){
                $('#pengumuman-all').removeClass('showing');
                $('#loader-uny-apps').removeClass('hidden');
                $('#pengumuman-all').addClass('hidden');
                $('#loader-uny-apps').addClass('showing');
                var pengumuman = [
                    {
                        url: 'https://www.uny.ac.id/index-pengumuman?page='+page.toString(), // url string rquired
                        selector: 'tr', // selector string rquired
                        loop: true, // each boolean rquired
                        result: [
                            {
                                name: 'title',
                                find: 'td.views-field.views-field-title a',
                                grab: {
                                    by: 'text',
                                    value: ''
                                }
                            },
                            {
                                name: 'link',
                                find: 'td.views-field.views-field-title a',
                                grab: {
                                    by: 'attr',
                                    value: 'href'
                                }
                            },
                        ]
                    }
                ];

                ygrab(pengumuman, function(result) {
                    var pengumuman = $('#pengumuman-section');
                    pengumuman.empty();
                    for (var i = 0; i < result.length; i++) {
                        pengumuman.append('<li class="collection-item dismissable"><div><a href="'+ result[i].link +'" class="black-text justify-align">'+ result[i].title +'</a></div></li>');
                    }
                    // console.log(JSON.stringify(result, null, 2));
                });
                setTimeout(function(){
                    $('#loader-uny-apps').removeClass('showing');
                    $('#pengumuman-all').removeClass('hidden');
                    $('#pengumuman-all').addClass('showing');
                    $('#loader-uny-apps').addClass('hidden');
                }, 3000);
            }
        </script>
    </body>
    <!-- END BODY -->
</html>